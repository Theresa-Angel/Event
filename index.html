<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>College Event Notification System</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
  <style>
    /* Keep your existing CSS */
    /* --- additional styles for modal forms --- */
    * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #4a6da7;
            --secondary: #7b9acc;
            --accent: #f47a60;
            --light: #f5f7fa;
            --dark: #2c3e50;
            --success: #28a745;
            --warning: #ffc107;
            --danger: #dc3545;
        }

        body {
            background-color: #f0f2f5;
            color: #333;
            line-height: 1.6;
        }

        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 1rem 2rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo i {
            font-size: 2rem;
        }

        .logo h1 {
            font-size: 1.8rem;
            font-weight: 700;
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 2rem;
        }

        nav a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: opacity 0.3s;
        }

        nav a:hover {
            opacity: 0.8;
        }

        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 1rem;
        }

        .hero {
            background: linear-gradient(rgba(74, 109, 167, 0.9), rgba(74, 109, 167, 0.9)), url('https://images.unsplash.com/photo-1523050854058-8df90110c9f1?ixlib=rb-4.0.3') center/cover;
            color: white;
            padding: 3rem 2rem;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 2rem;
        }

        .hero h2 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .hero p {
            font-size: 1.2rem;
            max-width: 700px;
            margin: 0 auto 1.5rem;
        }

        .btn {
            display: inline-block;
            padding: 0.8rem 1.5rem;
            background-color: var(--accent);
            color: white;
            border: none;
            border-radius: 5px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s;
            text-decoration: none;
        }

        .btn:hover {
            background-color: #e36951;
        }
        
        .btn-edit {
            background-color: var(--warning);
            color: #000;
            margin-right: 0.5rem;
        }
        
        .btn-delete {
            background-color: var(--danger);
        }

        .filters {
            background-color: white;
            padding: 1.5rem;
            border-radius: 10px;
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.05);
            margin-bottom: 2rem;
        }

        .filter-options {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            align-items: center;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
        }

        .filter-group label {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--dark);
        }

        select, input {
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }

        .events-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 2rem;
        }

        .event-card {
            background-color: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s;
            position: relative;
        }

        .event-card:hover {
            transform: translateY(-5px);
        }

        .event-header {
            padding: 1.5rem;
            background-color: var(--primary);
            color: white;
        }

        .event-date {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .event-title {
            font-size: 1.4rem;
            margin: 0.5rem 0;
        }

        .event-category {
            display: inline-block;
            background-color: var(--secondary);
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            margin-top: 0.5rem;
        }

        .event-body {
            padding: 1.5rem;
        }

        .event-details {
            margin-bottom: 1rem;
        }

        .event-detail {
            display: flex;
            align-items: center;
            margin-bottom: 0.5rem;
            color: #555;
        }

        .event-detail i {
            margin-right: 0.5rem;
            color: var(--primary);
        }

        .event-description {
            margin: 1rem 0;
            color: #666;
        }
        
        .event-actions {
            display: flex;
            justify-content: flex-end;
            padding: 1rem 1.5rem;
            border-top: 1px solid #eee;
        }

        .admin-panel {
            background-color: white;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.05);
            margin-top: 2rem;
        }

        .admin-panel h2 {
            color: var(--primary);
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #eee;
        }
        
        .admin-panel h3 {
            color: var(--secondary);
            margin: 2rem 0 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid #eee;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--dark);
        }

        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }

        .form-group textarea {
            min-height: 120px;
            resize: vertical;
        }

        footer {
            color: black;
            text-align: center;
            padding: 1rem;
        }
        
        .manage-events {
            margin-top: 2rem;
        }
        
        .events-list {
            margin-top: 1rem;
        }
        
        .event-item {
            background-color: var(--light);
            padding: 1rem;
            margin-bottom: 1rem;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .event-info {
            flex: 1;
        }
        
        .event-item-title {
            font-weight: 600;
            margin-bottom: 0.3rem;
        }
        
        .event-item-details {
            font-size: 0.9rem;
            color: #666;
        }

footer {
            background-color: var(--dark);
            color: white;
            text-align: center;
            padding: 2rem;
            margin-top: 3rem;
}

        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                text-align: center;
                gap: 1rem;
            }
            
            nav ul {
                gap: 1rem;
            }
            
            .filter-options {
                flex-direction: column;
                align-items: stretch;
            }
            
            .events-grid {
                grid-template-columns: 1fr;
            }
            
            .event-item {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .event-actions {
                width: 100%;
                justify-content: flex-start;
                margin-top: 1rem;
            }
        }

    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0; top: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.5);
      justify-content: center;
      align-items: center;
    }
    .modal-content {
      background: white;
      padding: 2rem;
      border-radius: 10px;
      width: 90%;
      max-width: 500px;
      text-align: center;
      position: relative;
    }
    .modal-content h2 { margin-bottom: 1rem; color: var(--primary); }
    .modal-content .form-group { margin-bottom: 1rem; text-align: left; }
    .close-btn {
      position: absolute;
      right: 15px;
      top: 10px;
      cursor: pointer;
      font-size: 1.2rem;
      color: #444;
    }
    .notifications {
      background: #fff;
      padding: 1rem;
      border-radius: 10px;
      margin: 2rem 0;
      box-shadow: 0 2px 15px rgba(0,0,0,0.05);
    }
    .notification {
      background: var(--light);
      padding: 0.8rem;
      margin: 0.5rem 0;
      border-left: 5px solid var(--accent);
    }
  </style>
</head>
<body>
  <header>
    <div class="header-content">
      <div class="logo">
        <i class="fas fa-graduation-cap"></i>
        <h1>College Event Notifications</h1>
      </div>
      <nav>
        <ul>
          <li><a href="#"><i class="fas fa-home"></i> Home</a></li>
          <li><a href="#events"><i class="fas fa-calendar-alt"></i> Events</a></li>
          <li><a href="#notifications"><i class="fas fa-bell"></i> Notifications</a></li>
          <li id="loginNav"><a href="#" onclick="openModal('loginModal')"><i class="fas fa-user"></i> Login</a></li>
          <li id="logoutNav" style="display:none;"><a href="#" onclick="logoutUser()"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <div class="container">
        <div class="hero">
            <h2>Stay Updated with College Events</h2>
            <p>Never miss an important academic, cultural, or sports event happening in our college campus.</p>
            <a href="#events" class="btn">Explore Events</a>
        </div>

        <div class="filters">
            <div class="filter-options">
                <div class="filter-group">
                    <label for="category">Category</label>
                    <select id="category">
                        <option value="all">All Categories</option>
                        <option value="academic">Academic</option>
                        <option value="cultural">Cultural</option>
                        <option value="sports">Sports</option>
                        <option value="workshop">Workshop</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="date">Date</label>
                    <input type="date" id="date">
                </div>
                <div class="filter-group">
                    <label for="search">Search</label>
                    <input type="text" id="search" placeholder="Search events...">
                </div>
                <div class="filter-group">
                    <label>&nbsp;</label>
                    <button class="btn" onclick="filterEvents()">Apply Filters</button>
                </div>
            </div>
        </div>

    <!-- Notifications Section -->
    <section id="notifications">
      <h2>Latest Notifications</h2>
      <div class="notifications" id="notifications-container"></div>
    </section>

    <!-- Events -->
    <section id="events">
      <h2>Upcoming Events</h2>
      <div class="events-grid" id="events-container"></div>
    </section>

    <!-- Admin Panel -->
    <section class="admin-panel" id="admin-panel" style="display:none;">
      <h2>Admin Panel</h2>

      <h3>Add New Event</h3>
      <form id="event-form">
        <input type="hidden" id="event-id">
        <div class="form-group"><label>Title</label><input type="text" id="event-title" required></div>
        <div class="form-group"><label>Date</label><input type="date" id="event-date" required></div>
        <div class="form-group"><label>Time</label><input type="time" id="event-time" required></div>
        <div class="form-group"><label>Location</label><input type="text" id="event-location" required></div>
        <div class="form-group"><label>Category</label>
          <select id="event-category" required>
            <option value="academic">Academic</option>
            <option value="cultural">Cultural</option>
            <option value="sports">Sports</option>
            <option value="workshop">Workshop</option>
          </select>
        </div>
        <div class="form-group"><label>Description</label><textarea id="event-description" required></textarea></div>
        <button type="submit" class="btn" id="event-submit-btn">Add Event</button>
        <button type="button" class="btn btn-edit" id="event-cancel-btn" style="display:none;" onclick="cancelEdit()">Cancel</button>
      </form>

      <div class="manage-events">
        <h3>Manage Events</h3>
        <div class="events-list" id="events-list"></div>
      </div>

      <h3>Add Notification</h3>
      <form id="notification-form">
        <div class="form-group"><label>Message</label><textarea id="notification-message" required></textarea></div>
        <button type="submit" class="btn">Add Notification</button>
      </form>
    </section>
  </div>

  <!-- Login Modal -->
  <div class="modal" id="loginModal">
    <div class="modal-content">
      <span class="close-btn" onclick="closeModal('loginModal')">&times;</span>
      <h2>Login</h2>
      <form id="login-form">
        <div class="form-group"><label>Email</label><input type="email" id="login-email" required></div>
        <div class="form-group"><label>Password</label><input type="password" id="login-password" required></div>
        <button type="submit" class="btn">Login</button>
      </form>
      <p>Don't have an account? <a href="#" onclick="switchToRegister()">Register</a></p>
    </div>
  </div>

  <!-- Register Modal -->
  <div class="modal" id="registerModal">
    <div class="modal-content">
      <span class="close-btn" onclick="closeModal('registerModal')">&times;</span>
      <h2>Register</h2>
      <form id="register-form">
        <div class="form-group"><label>Email</label><input type="email" id="register-email" required></div>
        <div class="form-group"><label>Password</label><input type="password" id="register-password" required></div>
        <div class="form-group"><label>Role</label>
          <select id="register-role" required>
            <option value="student">Student</option>
            <option value="admin">Admin</option>
          </select>
        </div>
        <button type="submit" class="btn">Register</button>
      </form>
    </div>
  </div>

  <footer>
    <p><b>&copy; College Event Notification System. All rights reserved.</b></p>
  </footer>

  <script>
    /* ================= USERS & LOGIN ================= */
    let users = JSON.parse(localStorage.getItem("users")) || [];
    let currentUser = JSON.parse(localStorage.getItem("currentUser")) || null;

    function openModal(id){ document.getElementById(id).style.display="flex"; }
    function closeModal(id){ document.getElementById(id).style.display="none"; }
    function switchToRegister(){ closeModal('loginModal'); openModal('registerModal'); }

    document.getElementById("register-form").addEventListener("submit", e=>{
      e.preventDefault();
      const email=document.getElementById("register-email").value;
      const password=document.getElementById("register-password").value;
      const role=document.getElementById("register-role").value;

      if(users.find(u=>u.email===email)) return alert("User already exists!");
      users.push({email,password,role});
      localStorage.setItem("users",JSON.stringify(users));
      alert("Registration successful!");
      closeModal('registerModal');
    });

    document.getElementById("login-form").addEventListener("submit", e=>{
      e.preventDefault();
      const email=document.getElementById("login-email").value;
      const password=document.getElementById("login-password").value;

      const user=users.find(u=>u.email===email && u.password===password);
      if(!user) return alert("Invalid login!");

      currentUser=user;
      localStorage.setItem("currentUser",JSON.stringify(user));
      alert("Login successful!");

      closeModal('loginModal');
      updateUI();
    });

    function logoutUser(){
      currentUser=null;
      localStorage.removeItem("currentUser");
      updateUI();
    }

    function updateUI(){
      document.getElementById("loginNav").style.display=currentUser?"none":"block";
      document.getElementById("logoutNav").style.display=currentUser?"block":"none";
      const isAdmin = currentUser && currentUser.role==="admin";
      document.getElementById("admin-panel").style.display=isAdmin?"block":"none";
      
      if (isAdmin) {
        renderEventsList();
      }
    }

    /* ================= EVENTS ================= */
    let events = JSON.parse(localStorage.getItem("collegeEvents")) || [];

    function renderEvents(eventsToRender){
      const container=document.getElementById("events-container");
      container.innerHTML="";
      if(eventsToRender.length===0){ container.innerHTML="<p>No events found.</p>"; return; }

      eventsToRender.forEach(event=>{
        const eventCard=document.createElement("div");
        eventCard.className="event-card";
        const date=new Date(event.date);
        const formatted=date.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"});
        
        eventCard.innerHTML=`
          <div class="event-header">
            <div class="event-date">${formatted}</div>
            <h3 class="event-title">${event.title}</h3>
            <span class="event-category">${event.category}</span>
          </div>
          <div class="event-body">
            <div class="event-detail"><i class="fas fa-clock"></i><span>${event.time}</span></div>
            <div class="event-detail"><i class="fas fa-map-marker-alt"></i><span>${event.location}</span></div>
            <p class="event-description">${event.description}</p>
          </div>`;
        
        // Add edit/delete buttons for admin users
        if (currentUser && currentUser.role === "admin") {
          const actionsDiv = document.createElement("div");
          actionsDiv.className = "event-actions";
          actionsDiv.innerHTML = `
            <button class="btn btn-edit" onclick="editEvent(${event.id})"><i class="fas fa-edit"></i> Edit</button>
            <button class="btn btn-delete" onclick="deleteEvent(${event.id})"><i class="fas fa-trash"></i> Delete</button>
          `;
          eventCard.appendChild(actionsDiv);
        }
        
        container.appendChild(eventCard);
      });
    }

    function renderEventsList() {
      const container = document.getElementById("events-list");
      container.innerHTML = "";
      
      if (events.length === 0) {
        container.innerHTML = "<p>No events found.</p>";
        return;
      }
      
      events.forEach(event => {
        const date = new Date(event.date);
        const formattedDate = date.toLocaleDateString("en-US", {weekday:"short", month:"short", day:"numeric", year:"numeric"});
        
        const eventItem = document.createElement("div");
        eventItem.className = "event-item";
        eventItem.innerHTML = `
          <div class="event-info">
            <div class="event-item-title">${event.title}</div>
            <div class="event-item-details">${formattedDate} | ${event.time} | ${event.location}</div>
          </div>
          <div class="event-actions">
            <button class="btn btn-edit" onclick="editEvent(${event.id})"><i class="fas fa-edit"></i> Edit</button>
            <button class="btn btn-delete" onclick="deleteEvent(${event.id})"><i class="fas fa-trash"></i> Delete</button>
          </div>
        `;
        
        container.appendChild(eventItem);
      });
    }

    document.getElementById("event-form").addEventListener("submit", e=>{
      e.preventDefault();
      
      const eventId = document.getElementById("event-id").value;
      const newEvent = {
        id: eventId ? parseInt(eventId) : events.length > 0 ? Math.max(...events.map(e => e.id)) + 1 : 1,
        title: document.getElementById("event-title").value,
        date: document.getElementById("event-date").value,
        time: document.getElementById("event-time").value,
        location: document.getElementById("event-location").value,
        category: document.getElementById("event-category").value,
        description: document.getElementById("event-description").value
      };
      
      if (eventId) {
        // Update existing event
        const index = events.findIndex(e => e.id === parseInt(eventId));
        if (index !== -1) {
          events[index] = newEvent;
        }
      } else {
        // Add new event
        events.push(newEvent);
      }
      
      localStorage.setItem("collegeEvents", JSON.stringify(events));
      renderEvents(events);
      renderEventsList();
      e.target.reset();
      document.getElementById("event-submit-btn").textContent = "Add Event";
      document.getElementById("event-cancel-btn").style.display = "none";
      document.getElementById("event-id").value = "";
    });

    function editEvent(id) {
      const event = events.find(e => e.id === id);
      if (!event) return;
      
      document.getElementById("event-id").value = event.id;
      document.getElementById("event-title").value = event.title;
      document.getElementById("event-date").value = event.date;
      document.getElementById("event-time").value = event.time;
      document.getElementById("event-location").value = event.location;
      document.getElementById("event-category").value = event.category;
      document.getElementById("event-description").value = event.description;
      
      document.getElementById("event-submit-btn").textContent = "Update Event";
      document.getElementById("event-cancel-btn").style.display = "inline-block";
      
      // Scroll to form
      document.getElementById("event-form").scrollIntoView({ behavior: 'smooth' });
    }

    function cancelEdit() {
      document.getElementById("event-form").reset();
      document.getElementById("event-submit-btn").textContent = "Add Event";
      document.getElementById("event-cancel-btn").style.display = "none";
      document.getElementById("event-id").value = "";
    }

    function deleteEvent(id) {
      if (!confirm("Are you sure you want to delete this event?")) return;
      
      events = events.filter(e => e.id !== id);
      localStorage.setItem("collegeEvents", JSON.stringify(events));
      renderEvents(events);
      renderEventsList();
    }

    function filterEvents() {
      const category = document.getElementById("category").value;
      const date = document.getElementById("date").value;
      const search = document.getElementById("search").value.toLowerCase();
      
      let filteredEvents = events;
      
      if (category !== "all") {
        filteredEvents = filteredEvents.filter(event => event.category === category);
      }
      
      if (date) {
        filteredEvents = filteredEvents.filter(event => event.date === date);
      }
      
      if (search) {
        filteredEvents = filteredEvents.filter(event => 
          event.title.toLowerCase().includes(search) || 
          event.description.toLowerCase().includes(search) ||
          event.location.toLowerCase().includes(search)
        );
      }
      
      renderEvents(filteredEvents);
    }

    /* ================= NOTIFICATIONS ================= */
    let notifications = JSON.parse(localStorage.getItem("notifications")) || [];
    function renderNotifications(){
      const container=document.getElementById("notifications-container");
      container.innerHTML="";
      if(notifications.length===0){ container.innerHTML="<p>No notifications yet.</p>"; return; }
      notifications.forEach(note=>{
        const div=document.createElement("div");
        div.className="notification";
        div.textContent=note.message;
        container.appendChild(div);
      });
    }
    
    document.getElementById("notification-form").addEventListener("submit",e=>{
      e.preventDefault();
      const message=document.getElementById("notification-message").value;
      notifications.push({message});
      localStorage.setItem("notifications",JSON.stringify(notifications));
      renderNotifications();
      e.target.reset();
    });

    /* ================= INIT ================= */
    document.addEventListener("DOMContentLoaded",()=>{
      renderEvents(events);
      renderNotifications();
      updateUI();
    });
  </script>
</body>
</html>